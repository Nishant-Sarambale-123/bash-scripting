Perfect 🚀 Now we’re getting into **Advanced Bash Scripting topics** that are very useful in **DevOps automation & interviews**.
Let’s break it down into **detailed notes + interview Q\&A + real-world scenarios**.

---

# 📝 11. Advanced Topics in Bash

---

## 🔹 1. Arrays

Arrays allow storing **multiple values in a single variable**.

### Example:

```bash
arr=("dev" "staging" "prod")

echo ${arr[0]}   # dev
echo ${arr[1]}   # staging
echo ${arr[2]}   # prod
```

👉 Arrays are useful when you need to loop over **environments, servers, or filenames**.

### Loop through array:

```bash
for env in "${arr[@]}"; do
  echo "Deploying to $env"
done
```

---

## 🔹 2. Case Statement

Cleaner alternative to multiple `if-else` conditions.

### Example:

```bash
case $1 in
  start)
    echo "Starting service..."
    ;;
  stop)
    echo "Stopping service..."
    ;;
  restart)
    echo "Restarting service..."
    ;;
  *)
    echo "Usage: $0 {start|stop|restart}"
    ;;
esac
```

👉 Used for **service management scripts, build/deploy automation**.

---

## 🔹 3. Cron Jobs (Task Scheduling)

Cron = **scheduler** in Linux to automate repetitive tasks.

* Edit cron jobs:

  ```bash
  crontab -e
  ```
* View cron jobs:

  ```bash
  crontab -l
  ```

### Syntax:

```
* * * * * /path/to/script.sh
│ │ │ │ │
│ │ │ │ └── Day of week (0-6, Sunday=0)
│ │ │ └──── Month (1-12)
│ │ └────── Day of month (1-31)
│ └──────── Hour (0-23)
└────────── Minute (0-59)
```

### Example:

* Run backup script daily at **2 AM**:

```bash
0 2 * * * /path/to/backup.sh
```

* Run every 5 minutes:

```bash
*/5 * * * * /path/to/monitor.sh
```

---

# 🔹 Interview Q\&A

### **Q1. What are arrays in Bash and how are they used in DevOps?**

👉 Arrays store multiple values (e.g., environments: dev, staging, prod).
Used in deployment scripts to iterate over environments or server lists.

---

### **Q2. Difference between case statement and if-else?**

* `if-else` → good for numeric/string comparisons.
* `case` → better when checking against **multiple fixed values** (start/stop/restart).

---

### **Q3. How do you schedule a script to run every day at midnight?**

```bash
0 0 * * * /path/to/script.sh
```

---

### **Q4. How do you monitor a log file every 10 minutes with cron?**

```bash
*/10 * * * * /opt/scripts/log_monitor.sh
```

---

### **Q5. Can you give a real DevOps use case for cron jobs?**

* Backups at midnight.
* Log cleanup weekly.
* Service health checks every 5 minutes.
* Auto-scaling checks (e.g., trigger alert if CPU > 80%).

---

# 🔹 Real-World DevOps Scenarios

### **Scenario 1: Deploy to Multiple Environments**

```bash
envs=("dev" "staging" "prod")
for e in "${envs[@]}"; do
  echo "Deploying app to $e"
  # kubectl apply -f deployment.yaml --namespace=$e
done
```

---

### **Scenario 2: Service Control Script**

```bash
case $1 in
  start) systemctl start nginx ;;
  stop) systemctl stop nginx ;;
  restart) systemctl restart nginx ;;
  status) systemctl status nginx ;;
  *) echo "Usage: $0 {start|stop|restart|status}" ;;
esac
```

---

### **Scenario 3: Automated Backup with Cron**

* `backup.sh` script:

```bash
#!/bin/bash
tar -czf /backup/etc_$(date +%F).tar.gz /etc/
```

* Cron job:

```bash
0 2 * * * /opt/scripts/backup.sh
```

---

✅ **Quick Recap (Advanced Bash for DevOps):**

* **Arrays** → handle multiple values (servers, environments).
* **Case** → better than multiple if-else for service scripts.
* **Cron jobs** → schedule backups, monitoring, log cleanup.

---

Do you want me to create a **single combined Bash script** that includes **arrays + case + cron-friendly automation** (like a mini DevOps toolkit) so you can keep it in your notes?
